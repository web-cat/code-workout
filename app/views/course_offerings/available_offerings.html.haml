= inside_layout 'header' do
  = javascript_tag do
    window.codeworkout = window.codeworkout || {}
    window.codeworkout.lms_assignment_id = "#{@lms_assignment_id}"
    window.codeworkout.lis_result_sourcedid = "#{params[:lis_result_sourcedid]}"
    window.codeworkout.lis_outcome_service_url = "#{params[:lis_outcome_service_url]}"

  .container
    = javascript_include_tag('available_offerings')

    - if @available_workout_offerings.any?
      %h1 Section selection
      %p Click on your course section to proceed to the assignment.
      %ul.list-group
        - @available_workout_offerings.each do |wo|
          - practice_url = url_for(organization_workout_offering_practice_path(id: wo.id,
            lis_outcome_service_url: params[:lis_outcome_service_url],
            lis_result_sourcedid: params[:lis_result_sourcedid],
            organization_id: params[:organization_id],
            term_id: params[:term_id],
            course_id: params[:course_id],
            lti_launch: true))
          %a{ data: { practice_url: practice_url, course_offering_id: wo.course_offering.id, user_id: current_user.id }, class: 'workout-offering list-group-item action' }
            = wo.course_offering.display_name_with_term

      .text.text-danger
        If you cannot find your course section, ask your instructor which one you are enrolled in.
    - elsif @available_course_offerings.any?
      - @available_course_offerings.each do |co|
        %a{ data: { workout_id: @workout.id, course_offering_id: co.id, user_id: current_user.id }, class: 'course-offering list-group-item action' }
          = co.display_name_with_term

      .text.text-danger
        If you cannot find your course section, ask your instructor which one you are enrolled in.
    - else
      %h2 No available offerings
      .text.text-danger
        Please notify your instructor. Your course's sections may not have been created yet.
